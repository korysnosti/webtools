<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<link rel="icon" href="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KDTwhLS0gVXBsb2FkZWQgdG86IFNWRyBSZXBvLCB3d3cuc3ZncmVwby5jb20sIFRyYW5zZm9ybWVkIGJ5OiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4KPHN2ZyBmaWxsPSIjMjM5RTlFIiBoZWlnaHQ9IjgwMHB4IiB3aWR0aD0iODAwcHgiIGlkPSJMYXllcl8xIiBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2Ij4KDTxnIGlkPSJTVkdSZXBvX2JnQ2FycmllciIgc3Ryb2tlLXdpZHRoPSIwIi8+Cg08ZyBpZD0iU1ZHUmVwb190cmFjZXJDYXJyaWVyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KDTxnIGlkPSJTVkdSZXBvX2ljb25DYXJyaWVyIj4gPHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTQuMjUsM0gxLjc1QS43NDAyNy43NDAyNywwLDAsMCwxLDMuNzMwMTZ2OC41Mzk2OEEuNzQwMjkuNzQwMjksMCwwLDAsMS43NSwxM2gxMi41YS43NDAyOS43NDAyOSwwLDAsMCwuNzUtLjczMDE2VjMuNzMwMTZBLjc0MDI3Ljc0MDI3LDAsMCwwLDE0LjI1LDNaTTcuOTY1LDEwLjA1OUg2Ljk3Mzc0VjcuNzczMTFMNS45ODI1LDkuMzQ5NTYsNC45OTEyNSw3Ljc3MzExVjEwLjA1OUg0VjUuOTM0aC45MUw1Ljk4MjUsNy41MTAzOCw3LjA1NSw1LjkzNGguOTFabTIuNDU4ODQuMDA3MUw4Ljg0NzY2LDcuOTQ0NzlIOS45NDc0OVY1LjkzNGguOTkxMjRWNy45NDQ3OUgxMloiLz4gPC9nPgoNPC9zdmc+" type="image/svg+xml">
<title>–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ç–µ–∫—Å—Ç—É –∑ Telegram —É Markdown</title>
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        max-width: 600px;
        margin: 20px auto;
        background-color: #f2f2f7;
    }
    @media (orientation: portrait) {
        body {
            padding: 0 15px;
        }
    }
    .form-group {
        margin-bottom: 12px;
    }
    .block {
        margin-bottom: 24px;
    }
    label {
        display: block;
        margin-bottom: 6px;
        color: #1c1c1e;
        font-weight: 500;
    }
    input, textarea {
        width: 100%;
        padding: 8px 10px;
        border: 1px solid #d1d1d6;
        border-radius: 10px;
        background-color: #ffffff;
        font-size: 16px;
        box-sizing: border-box;
    }
    textarea {
        min-height: 100px;
        resize: vertical;
    }
    button {
        background-color: #007aff;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s;
        margin-top: 8px;
    }
    button:hover {
        background-color: #0066d6;
    }
    button:active {
        background-color: #0055b3;
    }
    #outputText {
        background-color: #eee;
        padding: 8px 10px;
        border: 1px solid #d1d1d6;
        border-radius: 10px;
        font-size: 16px;
        min-height: 100px;
        white-space: pre-wrap;
        box-sizing: border-box;
    }
    .copy {
        font-style: italic;
        color: #aaa;
        margin-top: 14px;
    }
    .copy a {
        text-decoration: none;
        color: #888;
    }
    .copy a:hover {
        text-decoration: underline;
    }
</style>
</head>
<body>

<h2>–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—É Telegram —É Markdown</h2>

<div class="block">
    <div class="form-group">
        <label for="inputText">–¢–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–æ–±–∫–∏:</label>
        <textarea id="inputText" placeholder="–í—Å—Ç–∞–≤—Ç–µ —Ç–µ–∫—Å—Ç —Å—é–¥–∏..."></textarea>
        <button onclick="pasteFromClipboard()">–í—Å—Ç–∞–≤–∏—Ç–∏ –∑ –±—É—Ñ–µ—Ä–∞</button>
    </div>
</div>

<div class="block">
    <div class="form-group">
        <label for="wordCount">–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤ –¥–ª—è –ø—Ä–∏–≤'—è–∑–∫–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:</label>
        <input type="number" id="wordCount" value="1" min="1" max="10">
    </div>
    <div class="form-group">
        <button onclick="convertText()">–ö–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏</button>
    </div>
</div>

<div class="block">
    <div class="form-group">
        <label for="outputText">–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
        <textarea id="outputText" readonly></textarea>
        <button onclick="copyResult()">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
    </div>
</div>

<div class="copy">
    –°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–æ–º <a href="https://t.me/+XjkM4ZLP7JcxOGYy" title="–ö–æ—Ä–∏—Å–Ω—ñ —Ç–∞ —Ü—ñ–∫–∞–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏, –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏, —Å–µ—Ä–≤—ñ—Å–∏, –®–Ü —Ç–∞ –ª–∞–π—Ñ—Ö–∞–∫–∏ –¥–ª—è –≤–∞—à–∏—Ö “ë–∞–¥–∂–µ—Ç—ñ–≤">–ö–æ—Ä–∏—Å–Ω–æ—Å—Ç—ñ –¥–ª—è “ê–∞–¥–∂–µ—Ç—ñ–≤ üá∫üá¶</a>
</div>

<script>
function convertText() {
    const text = document.getElementById('inputText').value;
    const wordCount = parseInt(document.getElementById('wordCount').value) || 1;

    const lines = text.split('\n').map(line => {
        // –û–±—Ä–æ–±–∫–∞ —Ä—è–¥–∫—ñ–≤ –∑ "‚Ä¢" —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º (—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–µ–º–∞—î –≤–∂–µ Markdown)
        line = line.replace(/‚Ä¢\s([^[]+?)\s*\((https?:\/\/[^\s)]+)\)/g, (match, p1, p2) => {
            const linkText = p1.trim();
            return `‚Ä¢ [${linkText}](${p2})`;
        });

        // –û–±—Ä–æ–±–∫–∞ –∑–≤–∏—á–∞–π–Ω–∏—Ö –ø–æ—Å–∏–ª–∞–Ω—å (—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–µ–º–∞—î –≤–∂–µ Markdown)
        line = line.replace(/([^[]+?)\s*\((https?:\/\/[^\s)]+)\)/g, (match, p1, p2) => {
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Ç–µ, —á–∏ –≤–∂–µ –≤ —Ç–µ–∫—Å—Ç—ñ —î –∫–≤–∞–¥—Ä–∞—Ç–Ω—ñ –¥—É–∂–∫–∏ (–æ–∑–Ω–∞—á–∞—î, —â–æ —Ü–µ –≤–∂–µ Markdown)
            console.log('p1', p1);
            if (p1.includes('[') || p1.includes(']')) {
                return match; // –Ø–∫—â–æ —î, –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω—é—î–º–æ
            }

            const trimmed = p1.trim();
            const words = trimmed.split(/\s+/);

            if (words.length === 0) return match;

            const lastWords = words.splice(-wordCount);
            const beforeWords = words.join(' ');
            const linkText = lastWords.join(' ');

            return (beforeWords ? beforeWords + ' ' : '') + `[${linkText}](${p2})`;
        });

        return line;
    });

    document.getElementById('outputText').value = lines.join('\n').trim();
}



function copyResult() {
    const output = document.getElementById('outputText');
    output.focus();
    output.select();
    try {
        document.execCommand('copy');
    } catch (err) {
        console.log('–ù–µ –≤–¥–∞–ª–æ—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏');
    }
}

function pasteFromClipboard() {
    const input = document.getElementById('inputText');
    navigator.clipboard.readText()
        .then(text => {
            input.value = text;
        })
        .catch(err => {
            console.log('–ù–µ –≤–¥–∞–ª–æ—Å—è –≤—Å—Ç–∞–≤–∏—Ç–∏ –∑ –±—É—Ñ–µ—Ä–∞');
        });
}
</script>

</body>
</html>

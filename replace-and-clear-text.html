<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KDTwhLS0gVXBsb2FkZWQgdG86IFNWRyBSZXBvLCB3d3cuc3ZncmVwby5jb20sIFRyYW5zZm9ybWVkIGJ5OiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4KPHN2ZyBmaWxsPSIjMjM5RTlFIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDBweCIgaGVpZ2h0PSI4MDBweCIgdmlld0JveD0iMCAwIDUyIDUyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MiA1MiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cg08ZyBpZD0iU1ZHUmVwb19iZ0NhcnJpZXIiIHN0cm9rZS13aWR0aD0iMCIvPgoNPGcgaWQ9IlNWR1JlcG9fdHJhY2VyQ2FycmllciIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cg08ZyBpZD0iU1ZHUmVwb19pY29uQ2FycmllciI+IDxwYXRoIGQ9Ik0yMCwzNy41YzAtMC44LTAuNy0xLjUtMS41LTEuNWgtMTVDMi43LDM2LDIsMzYuNywyLDM3LjV2MTFDMiw0OS4zLDIuNyw1MCwzLjUsNTBoMTVjMC44LDAsMS41LTAuNywxLjUtMS41IFYzNy41eiIvPiA8cGF0aCBkPSJNOC4xLDIySDMuMmMtMSwwLTEuNSwwLjktMC45LDEuNGw4LDguM2MwLjQsMC4zLDEsMC4zLDEuNCwwbDgtOC4zYzAuNi0wLjYsMC4xLTEuNC0wLjktMS40aC00LjcgYzAtNSw0LjktMTAsOS45LTEwVjZDMTUsNiw4LjEsMTMsOC4xLDIyeiIvPiA8cGF0aCBkPSJNNDEuOCwyMC4zYy0wLjQtMC4zLTEtMC4zLTEuNCwwbC04LDguM2MtMC42LDAuNi0wLjEsMS40LDAuOSwxLjRoNC44YzAsNi00LjEsMTAtMTAuMSwxMHY2IGM5LDAsMTYuMS03LDE2LjEtMTZINDljMSwwLDEuNS0wLjksMC45LTEuNEw0MS44LDIwLjN6Ii8+IDxwYXRoIGQ9Ik01MCwzLjVDNTAsMi43LDQ5LjMsMiw0OC41LDJoLTE1QzMyLjcsMiwzMiwyLjcsMzIsMy41djExYzAsMC44LDAuNywxLjUsMS41LDEuNWgxNWMwLjgsMCwxLjUtMC43LDEuNS0xLjUgVjMuNXoiLz4gPC9nPgoNPC9zdmc+" />
    <title>Text Replacement</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 600px;
            margin: 20px auto;
            /* padding: 20px; */
            background-color: #f2f2f7;
        }
        @media (orientation: portrait) {
            body {
                padding: 0 15px;
            }
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #1c1c1e;
            font-weight: 500;
        }
        input, textarea {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #d1d1d6;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 16px;
            box-sizing: border-box;
        }
        textarea {
            min-height: 60px;
            resize: vertical;
        }
        .textarea-60 {
            margin-bottom: 10px;
        }
        .textarea-100 {
            min-height: 100px;
        }
        button {
            background-color: #007aff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-bottom: 16px;
        }
        button:hover {
            background-color: #0066d6;
        }
        button:active {
            background-color: #0055b3;
        }
        .result {
            background-color: #eee;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #d1d1d6;
            margin-top: 0px;
            word-break: break-all;
            min-height: 12px;
        }
        .error {
            color: #ff3b30;
            font-size: 14px;
            margin-top: 4px;
            display: none;
        }
        .copy {
            font-style: italic;
            color: #aaa;
            margin-top: 14px;
        }
        .copy a {
            text-decoration: none;
            color: #888
        }
        .copy a:hover {
            text-decoration: underline;
        }
        .checkbox-inline {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        #showInvisible, #stripInvisible {
            width: 20px;
        }
        .showInvisibleLabel {
            margin: 0;
        }
        #copyResultMsg {
            font-size: 14px;
            color: #888;
            margin-top: 5px;
            display: none;
        }
        /* –ü–æ—á–∞—Ç–∫–æ–≤–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω–µ –ø–æ–ª–µ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É */
        #visualizedTextGroup {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>–ê–≤—Ç–æ–∑–∞–º—ñ–Ω–∞ —Ç–µ–∫—Å—Ç–∞</h1>

    <div class="container">
        <div class="input-group">
            <label for="textInput">–¢–µ–∫—Å—Ç –¥–ª—è –∑–∞–º—ñ–Ω–∏:</label>
            <textarea class="textarea-100" id="textInput" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç..."></textarea>
            <div class="checkbox-inline">
                <input type="checkbox" id="showInvisible">
                <label for="showInvisible" class="showInvisibleLabel">–ü–æ–∫–∞–∑–∞—Ç–∏ –Ω–µ–≤–∏–¥–∏–º—ñ —Å–∏–º–≤–æ–ª–∏</label>
            </div>
            <!-- –ù–æ–≤–µ –ø–æ–ª–µ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –∑ –≤—ñ–∑—É–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ –Ω–µ–≤–∏–¥–∏–º–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ -->
            <div id="visualizedTextGroup" class="input-group">
                <label for="visualizedText">–¢–µ–∫—Å—Ç –∑ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º –Ω–µ–≤–∏–¥–∏–º–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤:</label>
                <textarea class="textarea-100" id="visualizedText" readonly class="invisible-symbols"></textarea>
            </div>
        </div>

        <div class="input-group">
            <label for="searchText">–©–æ —à—É–∫–∞—Ç–∏:</label>
            <textarea class="textarea-60" id="searchText" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ—à—É–∫—É..."></textarea>
            <div class="checkbox-inline">
                <input type="checkbox" id="stripInvisible">
                <label for="stripInvisible" class="showInvisibleLabel">–û—á–∏—â–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Å–∏–º–≤–æ–ª–∏ –ø—ñ—Å–ª—è –∑–∞–º—ñ–Ω–∏</label>
            </div>
        </div>

        <div class="input-group">
            <label for="replaceText">–ù–∞ —â–æ –∑–∞–º—ñ–Ω–∏—Ç–∏:</label>
            <textarea class="textarea-60" id="replaceText" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –∑–∞–º—ñ–Ω–∏..."></textarea>
            <button class="button" onclick="clearSearchReplace()">–û—á–∏—Å—Ç–∏—Ç–∏ —Ñ–æ—Ä–º—É</button>
        </div>

        <button class="button" onclick="replaceText()">–ó–∞–º—ñ–Ω–∏—Ç–∏ —Ç–µ–∫—Å—Ç</button>

        <div class="input-group">
            <label for="resultText">–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
            <textarea class="textarea-100" id="resultText" readonly></textarea>
            <button class="button" onclick="copyResultText()">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
            <div id="copyResultMsg">–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –¥–æ –±—É—Ñ–µ—Ä–∞ –æ–±–º—ñ–Ω—É.</div>
        </div>

        <div class="copy">–°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–æ–º <a href="https://t.me/+XjkM4ZLP7JcxOGYy" title="–ö–æ—Ä–∏—Å–Ω—ñ —Ç–∞ —Ü—ñ–∫–∞–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏, –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏, —Å–µ—Ä–≤—ñ—Å–∏, –®–Ü —Ç–∞ –ª–∞–π—Ñ—Ö–∞–∫–∏ –¥–ª—è –≤–∞—à–∏—Ö “ë–∞–¥–∂–µ—Ç—ñ–≤">–ö–æ—Ä–∏—Å–Ω–æ—Å—Ç—ñ –¥–ª—è “ê–∞–¥–∂–µ—Ç—ñ–≤ üá∫üá¶</a></div>
    </div>

    <script>
        const invisibleVisualMap = {
          '\u00A0': '‚çΩ',   // –ù–µ–≤–∏–¥–∏–º–∏–π —Å–∏–º–≤–æ–ª (non-breaking space) ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–±—ñ–ª—É, —â–æ –Ω–µ —Ä–æ–∑—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ –∫—ñ–Ω—Ü—ñ —Ä—è–¥–∫–∞.
          '\u202F': '‚çΩ',   // –ù–µ–≤–∏–¥–∏–º–∏–π –ø—Ä–æ–±—ñ–ª (narrow non-breaking space) ‚Äî —Å—Ö–æ–∂–∏–π –Ω–∞ –∑–≤–∏—á–∞–π–Ω–∏–π –ø—Ä–æ–±—ñ–ª, –∞–ª–µ –≤–∂–µ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ —Ç–∏–ø–æ–≥—Ä–∞—Ñ—ñ—ó –¥–ª—è —á–∏—Å–ª–∞ –∞–±–æ –æ–¥–∏–Ω–∏—Ü—å –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è.
          '\u200B': '‚ó¶',    // –ù–µ–≤–∏–¥–∏–º–∏–π —Å–∏–º–≤–æ–ª (zero-width space) ‚Äî –Ω–µ –º–∞—î –≤–∏–¥–∏–º–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Å–ª—ñ–≤ —á–∏ —Å–∏–º–≤–æ–ª—ñ–≤ –±–µ–∑ –≤–∏–¥–∏–º–æ–≥–æ –ø—Ä–æ–±—ñ–ª—É.
          '\u200C': 'ÀΩ',    // –ù–µ–≤–∏–¥–∏–º–∏–π —Å–∏–º–≤–æ–ª (zero-width non-joiner) ‚Äî –∑–∞–±–æ—Ä–æ–Ω—è—î –∑–ª–∏—Ç—Ç—è –ª—ñ—Ç–µ—Ä –∞–±–æ —Å–∏–º–≤–æ–ª—ñ–≤ –≤ –ø–µ–≤–Ω–∏—Ö —à—Ä–∏—Ñ—Ç–∞—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ –º–æ–≤–∞—Ö –∑ –ª—ñ–≥–∞—Ç—É—Ä–∞–º–∏.
          '\u200D': '‚âÄ',    // –ù–µ–≤–∏–¥–∏–º–∏–π —Å–∏–º–≤–æ–ª (zero-width joiner) ‚Äî –Ω–∞–≤–ø–∞–∫–∏, –∑–º—É—à—É—î –ª—ñ—Ç–µ—Ä–∏ –∞–±–æ —Å–∏–º–≤–æ–ª–∏ –∑–ª–∏–≤–∞—Ç–∏—Å—è –≤ –ª—ñ–≥–∞—Ç—É—Ä—É.
          '\u2060': '‚≠æ',   // –ù–µ–≤–∏–¥–∏–º–∏–π —Å–∏–º–≤–æ–ª (word joiner) ‚Äî –∑–∞–±–æ—Ä–æ–Ω—è—î —Ä–æ–∑—Ä–∏–≤ —Ä—è–¥–∫–∞ –≤ –ø–µ–≤–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö, –∞–ª–µ –Ω–µ –¥–æ–¥–∞—î –≤–∏–¥–∏–º–æ–≥–æ –ø—Ä–æ–±—ñ–ª—É.
          '\uFEFF': '‚ê£',    // BOM (byte order mark) ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É –±–∞–π—Ç—ñ–≤ —É —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª–∞—Ö.
          '\u180E': '‚éµ'    // –ù–µ–≤–∏–¥–∏–º–∏–π —Å–∏–º–≤–æ–ª (Mongolian vowel separator) ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ –º–æ–Ω–≥–æ–ª—å—Å—å–∫—ñ–π –ø–∏—Å—å–º–æ–≤—ñ–π —Å–∏—Å—Ç–µ–º—ñ –¥–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≥–æ–ª–æ—Å–Ω–∏—Ö.
        };

        const structuralVisualMap = {
            '\n': '‚§∂',
            '\t': '‚Ü¶'
        };

        const invisibleStripList = Object.keys(invisibleVisualMap);

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function visualizeInvisible(text) {
            const combined = { ...invisibleVisualMap, ...structuralVisualMap };
            for (const [code, symbol] of Object.entries(combined)) {
                const regex = new RegExp(code, 'g');
                text = text.replace(regex, symbol);
            }
            return text;
        }

        function stripSpecials(text) {
            const chars = invisibleStripList.join('|').replace(/\\u/g, '\\u');
            const pattern = new RegExp(chars, 'g');
            return text.replace(pattern, '');
        }

        function updateVisualizedText() {
            const textInputValue = document.getElementById('textInput').value;
            const visualizedTextArea = document.getElementById('visualizedText');
            visualizedTextArea.value = visualizeInvisible(textInputValue);
        }

        function replaceText() {
            const textInputValue = document.getElementById('textInput').value;
            const searchText = document.getElementById('searchText').value;
            const replaceTextValue = document.getElementById('replaceText').value;
            const shouldStrip = document.getElementById('stripInvisible').checked;

            let result = textInputValue;

            if (searchText) {
                const regex = new RegExp(escapeRegExp(searchText), 'g');
                result = result.replace(regex, replaceTextValue);
            }

            if (shouldStrip) {
                result = stripSpecials(result);
            }

            const resultTextArea = document.getElementById('resultText');
            resultTextArea.value = result;
        }

        function copyResultText() {
            const textarea = document.getElementById('resultText');
            textarea.select();
            try {
                if (document.execCommand('copy')) {
                    document.getElementById('copyResultMsg').style.display = 'none';
                } else {
                    throw new Error();
                }
            } catch {
                document.getElementById('copyResultMsg').style.display = 'block';
            }
        }

        function clearSearchReplace() {
            document.getElementById('searchText').value = '';
            document.getElementById('replaceText').value = '';
            localStorage.removeItem('searchText');
            localStorage.removeItem('replaceText');
        }

        document.addEventListener('DOMContentLoaded', function () {
            const searchTextInput = document.getElementById('searchText');
            const replaceTextInput = document.getElementById('replaceText');
            const textInput = document.getElementById('textInput');
            const showInvisibleCheckbox = document.getElementById('showInvisible');
            const visualizedTextGroup = document.getElementById('visualizedTextGroup');

            // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
            searchTextInput.value = localStorage.getItem('searchText') || '';
            replaceTextInput.value = localStorage.getItem('replaceText') || '';

            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ
            searchTextInput.addEventListener('input', function () {
                localStorage.setItem('searchText', searchTextInput.value);
            });

            replaceTextInput.addEventListener('input', function () {
                localStorage.setItem('replaceText', replaceTextInput.value);
            });

            // –õ–æ–≥—ñ–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è/–ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–ª—è –∑ –≤—ñ–∑—É–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
            showInvisibleCheckbox.addEventListener('change', function () {
                if (this.checked) {
                    visualizedTextGroup.style.display = 'block';
                    updateVisualizedText(); // –û–Ω–æ–≤–ª—é—î–º–æ –≤–º—ñ—Å—Ç –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó
                } else {
                    visualizedTextGroup.style.display = 'none';
                }
            });

            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–∑—É–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É –ø—Ä–∏ –∑–º—ñ–Ω—ñ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
            textInput.addEventListener('input', function () {
                if (showInvisibleCheckbox.checked) {
                    updateVisualizedText();
                }
            });
        });
    </script>
</body>
</html>
